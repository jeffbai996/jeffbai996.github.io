import{j as e}from"./index-BiQY3Ub6.js";import{b as u,L as b}from"./vendor-react-cPoFM-5f.js";import"./chatbot-utils-BA5qZPu5.js";import"./vendor-google-gkihbV2W.js";const T=(a=60)=>{const x=[];let h=8500;const n=Date.now(),o=1440*60*1e3;for(let l=a-1;l>=0;l--){const g=n-l*o,y=(Math.random()-.48)*100;h+=y;const p=h,c=h+(Math.random()-.5)*50,d=Math.max(p,c)+Math.random()*30,r=Math.min(p,c)-Math.random()*30,j=Math.floor(Math.random()*5e6+2e6);x.push({timestamp:g,open:p,high:d,low:r,close:c,volume:j})}return x},E=(a,x=14)=>{const h=[];for(let n=0;n<a.length;n++){if(n<x){h.push(null);continue}let o=0,l=0;for(let d=n-x+1;d<=n;d++){const r=a[d].close-a[d-1].close;r>0?o+=r:l-=r}const g=o/x,y=l/x,c=100-100/(1+g/(y||1));h.push(c)}return h},B=(a,x=12,h=26,n=9)=>{const o=a.map(r=>r.close),l=(r,j)=>{const C=2/(j+1),v=[r[0]];for(let N=1;N<r.length;N++)v.push(r[N]*C+v[N-1]*(1-C));return v},g=l(o,x),y=l(o,h),p=g.map((r,j)=>r-y[j]),c=l(p,n),d=p.map((r,j)=>r-c[j]);return{macdLine:p,signalLine:c,histogram:d}};function L(){var k,S;const[a]=u.useState(()=>T(60)),[x,h]=u.useState("PSE"),[n,o]=u.useState("1D"),[l,g]=u.useState(!1),[y,p]=u.useState(!1),c=u.useRef(null),d=u.useRef(null),r=u.useRef(null),j=((k=a[a.length-1])==null?void 0:k.close)||8742,C=((S=a[a.length-2])==null?void 0:S.close)||8637,v=j-C,N=v/C*100,P=[{symbol:"PNB",name:"Praya National Bank",price:142.5,change:2.4},{symbol:"TECH",name:"Praya Technologies",price:87.32,change:-1.2},{symbol:"INDU",name:"Industrial Group",price:215.8,change:3.1},{symbol:"ENER",name:"Praya Energy Corp",price:52.15,change:-.8},{symbol:"CONS",name:"Consumer Goods Ltd",price:98.44,change:1.5}],R=[{rank:1,symbol:"INDU",name:"Industrial Group",percent:3.1,value:215.8},{rank:2,symbol:"PNB",name:"Praya National Bank",percent:2.4,value:142.5},{rank:3,symbol:"CONS",name:"Consumer Goods",percent:1.5,value:98.44}],M=[{time:"2h ago",tag:"MARKETS",title:"PSE Composite hits new record high",excerpt:"Index surges past 8,750 on strong financial sector performance."},{time:"4h ago",tag:"EARNINGS",title:"Praya National Bank reports Q4 earnings beat",excerpt:"Net profit up 18% YoY as lending activity accelerates."},{time:"6h ago",tag:"IPO",title:"Tech startup TechCorp files for IPO",excerpt:"Company seeks to raise ¤500M in early 2025 listing."}];return u.useEffect(()=>{if(!(!l||typeof window>"u"||!window.Chart)){if(c.current){const s=c.current.getContext("2d");window.mainChart&&window.mainChart.destroy();const t=s.createLinearGradient(0,0,0,400);t.addColorStop(0,"rgba(59, 130, 246, 0.3)"),t.addColorStop(1,"rgba(59, 130, 246, 0)"),window.mainChart=new Chart(s,{type:"line",data:{labels:a.map((i,f)=>new Date(i.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"PSE Composite Index",data:a.map(i=>i.close),borderColor:"#3b82f6",backgroundColor:t,borderWidth:2,fill:!0,tension:.4,pointRadius:0,pointHoverRadius:6,pointHoverBackgroundColor:"#3b82f6",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(16, 24, 37, 0.95)",titleColor:"#e8ecf2",bodyColor:"#9ca3af",borderColor:"#2a3544",borderWidth:1,padding:12,displayColors:!1,callbacks:{label:function(i){return"Index: "+i.parsed.y.toFixed(2)}}}},scales:{x:{grid:{display:!1,drawBorder:!1},ticks:{color:"#6b7280",font:{size:11},maxRotation:0}},y:{position:"right",grid:{color:"rgba(156, 163, 175, 0.1)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:11},callback:function(i){return i.toLocaleString()}}}}}})}if(d.current){const s=d.current.getContext("2d");window.rsiChart&&window.rsiChart.destroy();const t=E(a);window.rsiChart=new Chart(s,{type:"line",data:{labels:a.map((f,m)=>m),datasets:[{label:"RSI",data:t,borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.1)",borderWidth:2,fill:!0,tension:.4,pointRadius:0,pointHoverRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(16, 24, 37, 0.95)",titleColor:"#e8ecf2",bodyColor:"#9ca3af",borderColor:"#2a3544",borderWidth:1,padding:8,displayColors:!1,callbacks:{title:()=>"",label:function(f){return"RSI: "+(f.parsed.y||0).toFixed(2)}}}},scales:{x:{display:!1},y:{position:"right",min:0,max:100,grid:{color:"rgba(156, 163, 175, 0.1)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:10},stepSize:50}}}}});const i=window.rsiChart.chartArea;if(i){const f=window.rsiChart.scales.y;s.save(),s.strokeStyle="rgba(239, 68, 68, 0.3)",s.lineWidth=1,s.setLineDash([5,5]);const m=f.getPixelForValue(70);s.beginPath(),s.moveTo(i.left,m),s.lineTo(i.right,m),s.stroke();const w=f.getPixelForValue(30);s.beginPath(),s.moveTo(i.left,w),s.lineTo(i.right,w),s.stroke(),s.restore()}}if(r.current){const s=r.current.getContext("2d");window.macdChart&&window.macdChart.destroy();const{macdLine:t,signalLine:i,histogram:f}=B(a);window.macdChart=new Chart(s,{type:"bar",data:{labels:a.map((m,w)=>w),datasets:[{type:"bar",label:"Histogram",data:f,backgroundColor:f.map(m=>m>=0?"rgba(16, 185, 129, 0.5)":"rgba(239, 68, 68, 0.5)"),borderWidth:0},{type:"line",label:"MACD",data:t,borderColor:"#3b82f6",borderWidth:2,pointRadius:0,fill:!1,tension:.4},{type:"line",label:"Signal",data:i,borderColor:"#ef4444",borderWidth:2,pointRadius:0,fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(16, 24, 37, 0.95)",titleColor:"#e8ecf2",bodyColor:"#9ca3af",borderColor:"#2a3544",borderWidth:1,padding:8,displayColors:!0,callbacks:{title:()=>"",label:function(m){return m.dataset.label+": "+m.parsed.y.toFixed(2)}}}},scales:{x:{display:!1},y:{position:"right",grid:{color:"rgba(156, 163, 175, 0.1)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:10}}}}}})}return()=>{window.mainChart&&window.mainChart.destroy(),window.rsiChart&&window.rsiChart.destroy(),window.macdChart&&window.macdChart.destroy()}}},[a,l]),u.useEffect(()=>{if(typeof window<"u")if(window.Chart)g(!0);else{const s=document.createElement("script");s.src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js",s.async=!0;const t=setTimeout(()=>{window.Chart||(console.error("Chart.js load timeout"),p(!0))},1e4);return s.onload=()=>{clearTimeout(t),g(!0)},s.onerror=()=>{clearTimeout(t),console.error("Failed to load Chart.js"),p(!0)},document.head.appendChild(s),()=>clearTimeout(t)}},[]),e.jsxs("div",{className:"pse-container",children:[e.jsx("header",{className:"pse-header",children:e.jsxs("div",{className:"pse-header-content",children:[e.jsxs(b,{to:"/pse",className:"pse-logo",children:[e.jsx("div",{className:"pse-logo-icon",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:e.jsx("polyline",{points:"22,12 18,12 15,21 9,3 6,12 2,12"})})}),e.jsxs("div",{className:"pse-logo-text",children:[e.jsx("h1",{children:"Praya Stock Exchange"}),e.jsx("span",{children:"Professional Trading Platform"})]})]}),e.jsxs("nav",{className:"pse-nav",children:[e.jsx(b,{to:"/pse",className:"pse-nav-link active",children:"Markets"}),e.jsx(b,{to:"/pse",className:"pse-nav-link",children:"Analysis"}),e.jsx(b,{to:"/pse",className:"pse-nav-link",children:"News"}),e.jsxs(b,{to:"/bop",className:"pse-link-bop",children:[e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}),e.jsx("line",{x1:"1",y1:"10",x2:"23",y2:"10"})]}),"Bank of Praya"]})]})]})}),e.jsx("div",{className:"pse-status-bar",children:e.jsxs("div",{className:"pse-status-content",children:[e.jsxs("div",{className:"pse-status-item",children:[e.jsx("span",{className:"pse-status-label",children:"Market Status"}),e.jsxs("span",{className:"pse-status-badge",children:[e.jsx("span",{className:"pse-status-pulse"}),"OPEN"]})]}),e.jsxs("div",{className:"pse-status-item",children:[e.jsx("span",{className:"pse-status-label",children:"PSE Index"}),e.jsx("span",{className:"pse-status-value",children:j.toFixed(2)}),e.jsxs("span",{className:`pse-status-change ${v>=0?"positive":"negative"}`,children:[v>=0?"+":"",v.toFixed(2)," (",N>=0?"+":"",N.toFixed(2),"%)"]})]}),e.jsxs("div",{className:"pse-status-item",children:[e.jsx("span",{className:"pse-status-label",children:"Market Cap"}),e.jsx("span",{className:"pse-status-value",children:"¤892B"}),e.jsx("span",{className:"pse-status-change",style:{color:"var(--pse-text-muted)"},children:"Total Value"})]}),e.jsxs("div",{className:"pse-status-item",children:[e.jsx("span",{className:"pse-status-label",children:"Volume"}),e.jsx("span",{className:"pse-status-value",children:"¤3.2B"}),e.jsx("span",{className:"pse-status-change",style:{color:"var(--pse-text-muted)"},children:"Today"})]}),e.jsxs("div",{className:"pse-status-item",children:[e.jsx("span",{className:"pse-status-label",children:"Trades"}),e.jsx("span",{className:"pse-status-value",children:"124K"}),e.jsx("span",{className:"pse-status-change",style:{color:"var(--pse-text-muted)"},children:"Today"})]})]})}),e.jsx("main",{className:"pse-main",children:e.jsxs("div",{className:"pse-grid",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"pse-card",style:{marginBottom:"20px"},children:[e.jsxs("div",{className:"pse-card-header",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"pse-card-title",children:"PSE Composite Index"}),e.jsx("p",{className:"pse-card-subtitle",children:"Real-time market performance"})]}),e.jsxs("div",{className:"pse-card-actions",children:[e.jsx("button",{className:`pse-card-action ${n==="1D"?"active":""}`,onClick:()=>o("1D"),children:"1D"}),e.jsx("button",{className:`pse-card-action ${n==="1W"?"active":""}`,onClick:()=>o("1W"),children:"1W"}),e.jsx("button",{className:`pse-card-action ${n==="1M"?"active":""}`,onClick:()=>o("1M"),children:"1M"}),e.jsx("button",{className:`pse-card-action ${n==="1Y"?"active":""}`,onClick:()=>o("1Y"),children:"1Y"})]})]}),e.jsx("div",{className:"pse-card-body",children:e.jsx("div",{className:"pse-chart-container",children:y?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:"var(--pse-text-muted)"},children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{margin:"0 auto 16px",display:"block",opacity:.5},children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),e.jsx("p",{style:{marginBottom:"8px",fontSize:"14px",fontWeight:"500"},children:"Chart unavailable"}),e.jsx("p",{style:{fontSize:"13px",opacity:.7},children:"Unable to load charting library. Please check your connection and refresh."}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"16px",padding:"8px 16px",background:"var(--pse-primary)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"13px"},children:"Retry"})]}):l?e.jsx("canvas",{ref:c}):e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:"var(--pse-text-muted)"},children:[e.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid var(--pse-border)",borderTopColor:"var(--pse-primary)",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 16px"}}),e.jsx("p",{style:{fontSize:"13px"},children:"Loading charts..."})]})})})]}),e.jsxs("div",{className:"pse-card",style:{marginBottom:"20px"},children:[e.jsx("div",{className:"pse-card-header",children:e.jsx("h3",{className:"pse-card-title",children:"Technical Indicators"})}),e.jsxs("div",{className:"pse-card-body",children:[e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--pse-text-primary)"},children:"Relative Strength Index (RSI)"}),e.jsx("span",{style:{fontSize:"12px",color:"var(--pse-text-muted)"},children:"Period: 14"})]}),e.jsx("div",{className:"pse-indicator-chart",children:e.jsx("canvas",{ref:d})})]}),e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[e.jsx("span",{style:{fontSize:"13px",fontWeight:"600",color:"var(--pse-text-primary)"},children:"MACD (Moving Average Convergence Divergence)"}),e.jsx("span",{style:{fontSize:"12px",color:"var(--pse-text-muted)"},children:"12, 26, 9"})]}),e.jsx("div",{className:"pse-indicator-chart",children:e.jsx("canvas",{ref:r})})]})]})]}),e.jsxs("div",{className:"pse-card",children:[e.jsx("div",{className:"pse-card-header",children:e.jsx("h3",{className:"pse-card-title",children:"Market News"})}),M.map((s,t)=>e.jsxs("div",{className:"pse-news-item",children:[e.jsxs("div",{className:"pse-news-meta",children:[e.jsx("span",{className:"pse-news-time",children:s.time}),e.jsx("span",{className:"pse-news-tag",children:s.tag})]}),e.jsx("h4",{className:"pse-news-title",children:s.title}),e.jsx("p",{className:"pse-news-excerpt",children:s.excerpt})]},t))]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"pse-card",style:{marginBottom:"20px"},children:[e.jsx("div",{className:"pse-card-header",children:e.jsx("h3",{className:"pse-card-title",children:"Watchlist"})}),e.jsx("div",{className:"pse-watchlist",children:P.map((s,t)=>e.jsxs("div",{className:"pse-watchlist-item",onClick:()=>h(s.symbol),children:[e.jsxs("div",{children:[e.jsx("div",{className:"pse-watchlist-symbol",children:s.symbol}),e.jsx("div",{className:"pse-watchlist-name",children:s.name})]}),e.jsxs("div",{className:"pse-watchlist-price",children:[e.jsxs("div",{className:"pse-watchlist-value",children:["¤",s.price.toFixed(2)]}),e.jsxs("div",{className:`pse-watchlist-change ${s.change>=0?"text-success":"text-danger"}`,children:[s.change>=0?"+":"",s.change.toFixed(1),"%"]})]})]},t))})]}),e.jsxs("div",{className:"pse-card",style:{marginBottom:"20px"},children:[e.jsx("div",{className:"pse-card-header",children:e.jsx("h3",{className:"pse-card-title",children:"Top Gainers"})}),e.jsx("div",{className:"pse-card-body",children:e.jsx("div",{className:"pse-movers",children:R.map(s=>e.jsxs("div",{className:"pse-mover-item",children:[e.jsxs("div",{className:"pse-mover-info",children:[e.jsx("div",{className:"pse-mover-rank",children:s.rank}),e.jsxs("div",{children:[e.jsx("div",{className:"pse-mover-symbol",children:s.symbol}),e.jsx("div",{className:"pse-mover-name",children:s.name})]})]}),e.jsxs("div",{className:"pse-mover-change",children:[e.jsxs("div",{className:"pse-mover-percent text-success",children:["+",s.percent,"%"]}),e.jsxs("div",{className:"pse-mover-value",children:["¤",s.value.toFixed(2)]})]})]},s.rank))})})]}),e.jsxs("div",{className:"pse-info-panel",children:[e.jsx("h4",{children:"Trading Information"}),e.jsxs("div",{className:"pse-info-row",children:[e.jsx("span",{className:"pse-info-label",children:"Market Opens"}),e.jsx("span",{className:"pse-info-value",children:"9:30 AM"})]}),e.jsxs("div",{className:"pse-info-row",children:[e.jsx("span",{className:"pse-info-label",children:"Market Closes"}),e.jsx("span",{className:"pse-info-value",children:"4:00 PM"})]}),e.jsxs("div",{className:"pse-info-row",children:[e.jsx("span",{className:"pse-info-label",children:"After Hours"}),e.jsx("span",{className:"pse-info-value",children:"4:00 - 6:30 PM"})]}),e.jsxs("div",{className:"pse-info-row",children:[e.jsx("span",{className:"pse-info-label",children:"Settlement"}),e.jsx("span",{className:"pse-info-value",children:"T+2"})]})]})]})]})}),e.jsx("footer",{className:"pse-footer",children:e.jsxs("div",{className:"pse-footer-content",children:[e.jsxs("div",{className:"pse-footer-grid",children:[e.jsxs("div",{className:"pse-footer-brand",children:[e.jsx("h4",{children:"Praya Stock Exchange"}),e.jsx("p",{children:"The primary securities exchange of the Republic of Praya, facilitating capital formation and providing a transparent marketplace for investors and traders worldwide."})]}),e.jsxs("div",{className:"pse-footer-section",children:[e.jsx("h5",{children:"Trading"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Market Data"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Trading Platform"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Order Types"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Fees & Commissions"})})]})]}),e.jsxs("div",{className:"pse-footer-section",children:[e.jsx("h5",{children:"Resources"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx("a",{href:"#",children:"Education Center"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"API Documentation"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Market Reports"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Research"})})]})]}),e.jsxs("div",{className:"pse-footer-section",children:[e.jsx("h5",{children:"Related"}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(b,{to:"/bop",children:"Bank of Praya"})}),e.jsx("li",{children:e.jsx(b,{to:"/",children:"Government Portal"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Securities Commission"})}),e.jsx("li",{children:e.jsx("a",{href:"#",children:"Economic Data"})})]})]})]}),e.jsxs("div",{className:"pse-footer-bottom",children:[e.jsx("span",{children:"© 2024 Republic of Praya. Praya Stock Exchange."}),e.jsxs("div",{className:"pse-footer-legal",children:[e.jsx("a",{href:"#",children:"Terms of Service"}),e.jsx("a",{href:"#",children:"Privacy Policy"}),e.jsx("a",{href:"#",children:"Disclosures"})]})]})]})})]})}export{L as default};
