import{j as e}from"./index-BiQY3Ub6.js";import{b as o}from"./vendor-react-cPoFM-5f.js";import"./chatbot-utils-BA5qZPu5.js";import"./vendor-google-gkihbV2W.js";const g="govpraya_appointments",D=[{id:"npa",name:"National Police Agency",services:[{id:"police-clearance",name:"Police Clearance Certificate",duration:30},{id:"passport",name:"Passport Application",duration:45},{id:"report",name:"File Report",duration:20}]},{id:"revenue",name:"Revenue Department",services:[{id:"tax-consultation",name:"Tax Consultation",duration:30},{id:"tax-filing",name:"Tax Filing Assistance",duration:45},{id:"payment-plan",name:"Payment Plan Setup",duration:30}]},{id:"health",name:"Health Department",services:[{id:"vaccination",name:"Vaccination",duration:15},{id:"health-card",name:"Health Card Application",duration:30},{id:"checkup",name:"General Checkup",duration:45}]},{id:"housing",name:"Housing Authority",services:[{id:"application",name:"Housing Application",duration:60},{id:"consultation",name:"Housing Consultation",duration:30},{id:"inspection",name:"Property Inspection",duration:45}]}],O=["09:00","09:30","10:00","10:30","11:00","11:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00"];function u(){try{const s=localStorage.getItem(g);return s?JSON.parse(s):[]}catch{return[]}}function E(s="current-user"){return u().filter(i=>i.userId===s)}function M(s){const n=u(),i={id:`apt-${Date.now()}`,userId:"current-user",...s,status:"confirmed",createdAt:new Date().toISOString(),confirmationCode:V()};return n.push(i),localStorage.setItem(g,JSON.stringify(n)),{success:!0,appointment:i}}function $(s){const n=u(),i=n.findIndex(l=>l.id===s);return i===-1?{success:!1,error:"Appointment not found"}:(n[i].status="cancelled",n[i].cancelledAt=new Date().toISOString(),localStorage.setItem(g,JSON.stringify(n)),{success:!0,appointment:n[i]})}function z(s,n){const l=u().filter(r=>r.departmentId===s&&r.date===n&&r.status==="confirmed").map(r=>r.time);return O.filter(r=>!l.includes(r))}function V(){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n="";for(let i=0;i<8;i++)n+=s.charAt(Math.floor(Math.random()*s.length));return n}function N(s,n){return`${new Date(s).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})} at ${n}`}function W(s){const n=new Date;return new Date(`${s.date}T${s.time}`)>n&&s.status==="confirmed"}function F(s){const n=new Date;return new Date(`${s.date}T${s.time}`)<n}function f(){let s=new Date;for(s.setDate(s.getDate()+1);s.getDay()===0||s.getDay()===6;)s.setDate(s.getDate()+1);return s.toISOString().split("T")[0]}function H(s){var i,l,r;const n={};return s.departmentId||(n.department="Please select a department"),s.serviceId||(n.service="Please select a service"),s.date||(n.date="Please select a date"),s.time||(n.time="Please select a time"),(i=s.fullName)!=null&&i.trim()||(n.fullName="Please enter your full name"),(l=s.email)!=null&&l.trim()||(n.email="Please enter your email"),(r=s.phone)!=null&&r.trim()||(n.phone="Please enter your phone number"),{isValid:Object.keys(n).length===0,errors:n}}function L(){const[s,n]=o.useState("list"),[i,l]=o.useState(1),[r,I]=o.useState([]),[b,y]=o.useState(!1),[k,p]=o.useState(""),[w,x]=o.useState(""),[a,c]=o.useState({departmentId:"",serviceId:"",date:f(),time:"",fullName:"",email:"",phone:"",notes:""}),[A,P]=o.useState([]);o.useEffect(()=>{j()},[]),o.useEffect(()=>{if(a.departmentId&&a.date){const t=z(a.departmentId,a.date);P(t)}},[a.departmentId,a.date]);const j=()=>{const t=E();I(t)},d=D.find(t=>t.id===a.departmentId),h=d==null?void 0:d.services.find(t=>t.id===a.serviceId),C=()=>{if(p(""),i===1&&(!a.departmentId||!a.serviceId)){p("Please select a department and service");return}if(i===2&&(!a.date||!a.time)){p("Please select a date and time");return}l(i+1)},B=async()=>{p("");const t=H(a);if(!t.isValid){p(Object.values(t.errors)[0]);return}y(!0);try{M({...a,departmentName:d.name,serviceName:h.name}).success&&(x("Appointment booked successfully!"),c({departmentId:"",serviceId:"",date:f(),time:"",fullName:"",email:"",phone:"",notes:""}),l(4),j())}catch{p("Failed to book appointment. Please try again.")}y(!1)},T=async t=>{confirm("Are you sure you want to cancel this appointment?")&&$(t).success&&(x("Appointment cancelled successfully"),j())};if(s==="book")return e.jsx("div",{className:"appointments-page",children:e.jsxs("div",{className:"appointments-container",children:[e.jsxs("div",{className:"appointments-header",children:[e.jsxs("button",{onClick:()=>n("list"),className:"back-button",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back"]}),e.jsx("h1",{children:"Book Appointment"})]}),k&&e.jsxs("div",{className:"alert alert-error",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),k]}),e.jsxs("div",{className:"booking-wizard",children:[e.jsx("div",{className:"wizard-steps",children:["Service","Date & Time","Details","Confirm"].map((t,m)=>e.jsxs("div",{className:`wizard-step ${i>m+1?"completed":""} ${i===m+1?"active":""}`,children:[e.jsx("div",{className:"step-number",children:i>m+1?"✓":m+1}),e.jsx("div",{className:"step-label",children:t})]},m))}),i===1&&e.jsxs("div",{className:"wizard-content",children:[e.jsx("h2",{children:"Select Department and Service"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Department"}),e.jsxs("select",{value:a.departmentId,onChange:t=>c({...a,departmentId:t.target.value,serviceId:""}),className:"form-select",children:[e.jsx("option",{value:"",children:"Choose a department..."}),D.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),d&&e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Service"}),e.jsx("div",{className:"service-grid",children:d.services.map(t=>e.jsxs("button",{className:`service-card ${a.serviceId===t.id?"selected":""}`,onClick:()=>c({...a,serviceId:t.id}),children:[e.jsx("h3",{children:t.name}),e.jsxs("p",{children:[t.duration," minutes"]})]},t.id))})]}),e.jsx("button",{onClick:C,className:"btn-primary",disabled:!a.departmentId||!a.serviceId,children:"Continue"})]}),i===2&&e.jsxs("div",{className:"wizard-content",children:[e.jsx("h2",{children:"Choose Date and Time"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Date"}),e.jsx("input",{type:"date",value:a.date,min:f(),onChange:t=>c({...a,date:t.target.value,time:""}),className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Available Time Slots"}),e.jsx("div",{className:"time-slots",children:A.length>0?A.map(t=>e.jsx("button",{className:`time-slot ${a.time===t?"selected":""}`,onClick:()=>c({...a,time:t}),children:t},t)):e.jsx("p",{className:"no-slots",children:"No available slots for this date. Please choose another date."})})]}),e.jsxs("div",{className:"wizard-actions",children:[e.jsx("button",{onClick:()=>l(1),className:"btn-secondary",children:"Back"}),e.jsx("button",{onClick:C,className:"btn-primary",disabled:!a.time,children:"Continue"})]})]}),i===3&&e.jsxs("div",{className:"wizard-content",children:[e.jsx("h2",{children:"Your Details"}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name *"}),e.jsx("input",{type:"text",value:a.fullName,onChange:t=>c({...a,fullName:t.target.value}),className:"form-input",placeholder:"John Doe"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Email *"}),e.jsx("input",{type:"email",value:a.email,onChange:t=>c({...a,email:t.target.value}),className:"form-input",placeholder:"john@example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Phone Number *"}),e.jsx("input",{type:"tel",value:a.phone,onChange:t=>c({...a,phone:t.target.value}),className:"form-input",placeholder:"(555) 123-4567"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Additional Notes (Optional)"}),e.jsx("textarea",{value:a.notes,onChange:t=>c({...a,notes:t.target.value}),className:"form-textarea",rows:"4",placeholder:"Any special requirements or information..."})]}),e.jsxs("div",{className:"wizard-actions",children:[e.jsx("button",{onClick:()=>l(2),className:"btn-secondary",children:"Back"}),e.jsx("button",{onClick:B,className:"btn-primary",disabled:b,children:b?"Booking...":"Book Appointment"})]})]}),i===4&&e.jsxs("div",{className:"wizard-content confirmation",children:[e.jsx("div",{className:"success-icon",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.jsx("h2",{children:"Appointment Confirmed!"}),e.jsx("p",{children:"Your appointment has been successfully booked."}),e.jsxs("div",{className:"confirmation-details",children:[e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Department:"}),e.jsx("span",{className:"detail-value",children:d==null?void 0:d.name})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Service:"}),e.jsx("span",{className:"detail-value",children:h==null?void 0:h.name})]}),e.jsxs("div",{className:"detail-row",children:[e.jsx("span",{className:"detail-label",children:"Date & Time:"}),e.jsx("span",{className:"detail-value",children:N(a.date,a.time)})]})]}),e.jsx("button",{onClick:()=>{n("list"),l(1)},className:"btn-primary",children:"View All Appointments"})]})]})]})});const v=r.filter(W),S=r.filter(F);return e.jsx("div",{className:"appointments-page",children:e.jsxs("div",{className:"appointments-container",children:[e.jsxs("div",{className:"appointments-header",children:[e.jsxs("div",{children:[e.jsx("h1",{children:"My Appointments"}),e.jsx("p",{children:"View and manage your government service appointments"})]}),e.jsxs("button",{onClick:()=>n("book"),className:"btn-primary",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M12 5v14M5 12h14"})}),"Book Appointment"]})]}),w&&e.jsxs("div",{className:"alert alert-success",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),w,e.jsx("button",{onClick:()=>x(""),className:"alert-close",children:"×"})]}),e.jsxs("div",{className:"appointments-section",children:[e.jsxs("h2",{children:["Upcoming Appointments (",v.length,")"]}),v.length>0?e.jsx("div",{className:"appointments-grid",children:v.map(t=>e.jsxs("div",{className:"appointment-card",children:[e.jsxs("div",{className:"appointment-header",children:[e.jsx("h3",{children:t.departmentName}),e.jsx("span",{className:"status-badge confirmed",children:"Confirmed"})]}),e.jsxs("div",{className:"appointment-body",children:[e.jsx("p",{className:"service-name",children:t.serviceName}),e.jsxs("p",{className:"appointment-datetime",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),N(t.date,t.time)]}),e.jsxs("p",{className:"confirmation-code",children:["Code: ",t.confirmationCode]})]}),e.jsx("div",{className:"appointment-actions",children:e.jsx("button",{onClick:()=>T(t.id),className:"btn-secondary btn-sm",children:"Cancel"})})]},t.id))}):e.jsxs("div",{className:"empty-state",children:[e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),e.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),e.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),e.jsx("p",{children:"No upcoming appointments"}),e.jsx("button",{onClick:()=>n("book"),className:"btn-primary",children:"Book Your First Appointment"})]})]}),S.length>0&&e.jsxs("div",{className:"appointments-section",children:[e.jsx("h2",{children:"Past Appointments"}),e.jsx("div",{className:"appointments-grid",children:S.map(t=>e.jsxs("div",{className:"appointment-card past",children:[e.jsxs("div",{className:"appointment-header",children:[e.jsx("h3",{children:t.departmentName}),e.jsx("span",{className:`status-badge ${t.status}`,children:t.status})]}),e.jsxs("div",{className:"appointment-body",children:[e.jsx("p",{className:"service-name",children:t.serviceName}),e.jsx("p",{className:"appointment-datetime",children:N(t.date,t.time)})]})]},t.id))})]})]})})}export{L as default};
