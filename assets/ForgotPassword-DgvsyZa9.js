import{u as S,j as e}from"./index-BUpOfbWI.js";import{u as E,f as F,b as o,L as R}from"./vendor-react-cPoFM-5f.js";/* empty css             */import"./chatbot-utils-BA5qZPu5.js";import"./vendor-google-gkihbV2W.js";function q(){const j=E(),[g]=F(),{forgotPassword:w,resetPassword:f}=S(),d=g.get("type")==="recovery",[c,y]=o.useState(""),[t,v]=o.useState(""),[m,N]=o.useState(""),[r,n]=o.useState(!1),[i,l]=o.useState(null),[u,x]=o.useState(!1),b=[{regex:/.{8,}/,label:"At least 8 characters"},{regex:/[A-Z]/,label:"One uppercase letter"},{regex:/[a-z]/,label:"One lowercase letter"},{regex:/\d/,label:"One number"},{regex:/[@$!%*?&]/,label:"One special character (@$!%*?&)"}],p=s=>b.map(a=>({...a,met:a.regex.test(s)})),k=async s=>{s.preventDefault(),l(null),n(!0);try{await w(c),x(!0)}catch(a){l(a.message)}finally{n(!1)}},P=async s=>{if(s.preventDefault(),l(null),t!==m){l("Passwords do not match");return}if(!p(t).every(h=>h.met)){l("Password does not meet requirements");return}n(!0);try{await f(t),j("/login",{state:{message:"Password reset successfully. Please login with your new password."}})}catch(h){l(h.message)}finally{n(!1)}},C=p(t);return e.jsx("div",{className:"auth-page",children:e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsx("div",{className:"auth-logo",children:e.jsxs("div",{className:"prayapass-logo",children:[e.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",className:"logo-icon",children:[e.jsx("rect",{width:"40",height:"40",rx:"8",fill:"url(#logo-gradient-fp)"}),e.jsx("path",{d:"M12 20c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M20 16v8M16 20h8",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"logo-gradient-fp",x1:"0",y1:"0",x2:"40",y2:"40",children:[e.jsx("stop",{stopColor:"#f97316"}),e.jsx("stop",{offset:"1",stopColor:"#ea580c"})]})})]}),e.jsxs("div",{className:"logo-text",children:[e.jsx("span",{className:"logo-name",children:"PrayaPass"}),e.jsx("span",{className:"logo-tagline",children:"Republic of Praya"})]})]})}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h1",{children:"Create new password"}),e.jsx("p",{children:"Choose a strong password for your account"})]}),e.jsxs("form",{onSubmit:P,className:"auth-form",children:[i&&e.jsxs("div",{className:"auth-error",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),i]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"newPassword",children:"New password"}),e.jsx("input",{type:"password",id:"newPassword",value:t,onChange:s=>v(s.target.value),placeholder:"Enter new password",required:!0,autoComplete:"new-password",disabled:r}),t&&e.jsx("ul",{className:"password-requirements",children:C.map((s,a)=>e.jsxs("li",{className:s.met?"met":"",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.met?e.jsx("path",{d:"M20 6L9 17l-5-5"}):e.jsx("circle",{cx:"12",cy:"12",r:"10"})}),s.label]},a))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm new password"}),e.jsx("input",{type:"password",id:"confirmPassword",value:m,onChange:s=>N(s.target.value),placeholder:"Confirm new password",required:!0,autoComplete:"new-password",disabled:r})]}),e.jsx("button",{type:"submit",className:"auth-button",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Resetting password..."]}):"Reset password"})]})]}),!d&&u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("div",{className:"success-icon",children:e.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.jsx("h1",{children:"Check your email"}),e.jsxs("p",{children:["We've sent a password reset link to ",e.jsx("strong",{children:c}),". Click the link in the email to reset your password."]})]}),e.jsx("div",{className:"auth-form",children:e.jsxs("p",{className:"email-note",children:["Didn't receive the email? Check your spam folder or"," ",e.jsx("button",{type:"button",className:"link-button",onClick:()=>x(!1),children:"try again"})]})})]}),!d&&!u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("h1",{children:"Reset your password"}),e.jsx("p",{children:"Enter your email and we'll send you a link to reset your password"})]}),e.jsxs("form",{onSubmit:k,className:"auth-form",children:[i&&e.jsxs("div",{className:"auth-error",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),e.jsx("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),i]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email address"}),e.jsx("input",{type:"email",id:"email",value:c,onChange:s=>y(s.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email",disabled:r})]}),e.jsx("button",{type:"submit",className:"auth-button",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Sending link..."]}):"Send reset link"})]})]}),e.jsx("div",{className:"auth-footer",children:e.jsxs("p",{children:["Remember your password?"," ",e.jsx(R,{to:"/login",children:"Sign in"})]})})]})})})}export{q as default};
