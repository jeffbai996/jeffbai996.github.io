import{u as g,j as e}from"./index-F9qqBUq8.js";import{u as m,h as p,c as t}from"./vendor-react-Cv6iu0DG.js";/* empty css             */import"./vendor-supabase-BUqPLCfl.js";import"./chatbot-utils-BA5qZPu5.js";import"./vendor-google-BpRkNtKl.js";function C(){const r=m(),[a]=p(),{supabase:n}=g(),[o,s]=t.useState("verifying"),[u,c]=t.useState(""),[j,l]=t.useState(null);return t.useEffect(()=>{(async()=>{try{const i=a.get("type"),d=a.get("error_description"),h=a.get("error");if(h||d){s("error"),l(d||h||"Verification failed");return}const{data:{session:f},error:x}=await n.auth.getSession();if(x)throw x;if(f){if(i==="signup")s("success"),c("Email verified successfully! Welcome to PrayaPass.");else if(i==="recovery"){s("success"),c("Email verified. You can now reset your password."),setTimeout(()=>{r("/forgot-password?type=recovery",{replace:!0})},2e3);return}else s("success"),c("Verification successful!");setTimeout(()=>{r("/account",{replace:!0})},3e3)}else s("error"),l("Verification link expired or invalid. Please try registering again.")}catch(i){console.error("Auth callback error:",i),s("error"),l(i.message||"Verification failed. Please try again.")}})()},[r,a,n]),e.jsx("div",{className:"auth-page",children:e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsx("div",{className:"auth-logo",children:e.jsxs("div",{className:"prayapass-logo",children:[e.jsxs("svg",{viewBox:"0 0 40 40",fill:"none",className:"logo-icon",children:[e.jsx("rect",{width:"40",height:"40",rx:"8",fill:"url(#logo-gradient-callback)"}),e.jsx("path",{d:"M12 20c0-4.4 3.6-8 8-8s8 3.6 8 8-3.6 8-8 8",stroke:"#fff",strokeWidth:"2.5",strokeLinecap:"round"}),e.jsx("path",{d:"M20 16v8M16 20h8",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"logo-gradient-callback",x1:"0",y1:"0",x2:"40",y2:"40",children:[e.jsx("stop",{stopColor:"#f97316"}),e.jsx("stop",{offset:"1",stopColor:"#ea580c"})]})})]}),e.jsxs("div",{className:"logo-text",children:[e.jsx("span",{className:"logo-name",children:"PrayaPass"}),e.jsx("span",{className:"logo-tagline",children:"Republic of Praya"})]})]})}),o==="verifying"&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"auth-header",children:[e.jsxs("div",{className:"verifying-icon",children:[e.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"#f97316",strokeWidth:"2",children:e.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.3"})}),e.jsx("span",{className:"spinner-large"})]}),e.jsx("h1",{children:"Verifying your email"}),e.jsx("p",{children:"Please wait while we confirm your email address..."})]})}),o==="success"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("div",{className:"success-icon",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#10b981",strokeWidth:"2",children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),e.jsx("h1",{children:"Email Verified!"}),e.jsx("p",{children:u})]}),e.jsxs("div",{className:"auth-info-box success",children:[e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M12 16v-4M12 8h.01"})]}),e.jsx("p",{children:"Redirecting you to your dashboard..."})]})]}),o==="error"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("div",{className:"error-icon",children:e.jsxs("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#ef4444",strokeWidth:"2",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]})}),e.jsx("h1",{children:"Verification Failed"}),e.jsx("p",{children:j})]}),e.jsxs("div",{className:"auth-form",children:[e.jsx("button",{onClick:()=>r("/register"),className:"auth-button",children:"Back to Registration"}),e.jsx("div",{className:"auth-divider",children:e.jsx("span",{children:"or"})}),e.jsx("button",{onClick:()=>r("/login"),className:"auth-button-secondary",children:"Go to Login"})]})]})]})})})}export{C as default};
